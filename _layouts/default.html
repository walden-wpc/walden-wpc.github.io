<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ page.description | default: site.description }}">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
    <!-- [FIX] Hardcoded absolute path with Cache Buster -->
    <link rel="stylesheet" href="/style.css?v={{ site.time | date: '%s' }}">
    <!-- Import Maps for Three.js -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
    </script>
</head>

<body>

    <header class="site-header">
        <h1 class="site-title"><a href="/">{{ site.title }}</a></h1>
        <nav class="main-nav">
            <ul>
                {% if page.url == "/" %}
                <li><a href="#projects">專案</a></li>
                <li><a href="#essays">論述</a></li>
                <li><a href="#fragments">隨想</a></li>
                {% else %}
                <li><a href="/">← 返回首頁</a></li>
                {% endif %}
            </ul>
        </nav>
    </header>

    {% if page.url == "/" %}
    <div id="walden-container"></div>
    <script type="module" src="/assets/js/walden.js"></script>
    {% endif %}

    <main class="article-container">
        {{ content }}
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <span>&copy; {{ "now" | date: "%Y" }} {{ site.title }}</span>
            <span class="separator">/</span>
            <span>Paper & Ink</span>
        </div>

        <div class="footer-social">
            {% for link in site.social %}
            <a href="{{ link[1] }}" target="_blank" class="social-link">{{ link[0] | capitalize }}</a>
            {% endfor %}
        </div>
    </footer>

</body>

</html>